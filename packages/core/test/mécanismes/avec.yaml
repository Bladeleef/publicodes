prix final:
  valeur: prix de base * (100% - réduction)
  unité: €
  avec:
    prix de base: 137 €
    réduction: 20%
  exemples:
    - valeur attendue: 109.6

CSG non déductible:
  produit:
    assiette: 1000 €
    composantes:
      - taux: taux
      - attributs:
          nom: revenus de remplacement
        assiette: 200 €
        taux: taux
  avec:
    taux: 10%
  exemples:
    - valeur attendue: 120

début d'activité:
  titre: Période de début d’activité
  question: À quelle période avez-vous débuté votre activité ?
  une possibilité:
    choix obligatoire: oui
    possibilités:
      - avant 2021
      - janvier 2021
      - février 2021
      - mars 2021
      - avril 2021
      - mai 2021
      - juin 2021
      - juillet 2021
  par défaut: "'avant 2021'"
  avec:
    avant 2021:
    janvier 2021:
    février 2021:
    mars 2021:
    avril 2021:
    mai 2021:
    juin 2021:
    juillet 2021:

  exemples:
    - valeur attendue: 'avant 2021'

avec dans avec:
  valeur: 2 * yumyum
  avec:
    yumyum:
      somme:
        - yum
        - yum
      avec:
        yum: 5
  exemples:
    - valeur attendue: 20

avec en dehors d'une règle:
  valeur:
    le maximum de:
      - a
      - b
    avec:
      a: 10
      b: 8
  exemples:
    - valeur attendue: 10

avec plusieurs valeur:
  somme:
    - le maximum de:
        - a
        - b
      avec:
        a: 10
        b: 8
    - valeur: c * d
      avec:
        c: 2
        d: 5
  exemples:
    - valeur attendue: 20

avec à plusieurs niveaux:
  -:
    - a
    - valeur: b
      avec:
        b: 2
  avec:
    a: 5
  exemples:
    - valeur attendue: 3

avec références:
  valeur: b
  avec:
    b:
      valeur: 5
      références:
        Fiche Urssaf: https://www.urssaf.fr/portail/home/independant/mes-cotisations/les-etapes-de-calcul/le-mode-de-calcul/les-cotisations-provisionnelles/debut-dactivite.html

  références:
    Fiche Urssaf: https://www.urssaf.fr/portail/home/independant/mes-cotisations/les-etapes-de-calcul/le-mode-de-calcul/lajustement-et-la-regularisation.html
  exemples:
    - valeur attendue: 5

prix initial: 125 €

avec utilisant une valeur courante:
  valeur: prix total
  avec:
    prix total: prix promo + prix expedition
    prix promo: prix initial - 20%
    prix expedition: 7 €
  exemples:
    - valeur attendue: 107

avec une référence locale qui écrase le parent:
  valeur: prix initial + 7 €
  avec:
    prix initial: 50 €
  exemples:
    - valeur attendue: 57
  référence: https://en.wikipedia.org/wiki/Variable_shadowing

prix produit: 100 €
frais d'expedition: prix produit * 10%

avec une référence locale qui écrase indirectement le parent:
  somme:
    - prix produit
    - frais d'expedition
  avec:
    prix produit: 50 €
  exemples:
    # TODO: je préférerais une exception ici
    - valeur attendue: 60
